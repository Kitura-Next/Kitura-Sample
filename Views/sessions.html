<!DOCTYPE html>
<html>
 <head>
   <meta charset="UTF-8">
   <link rel="stylesheet" type="text/css" href="stylesheet.css"/>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
   <script>
    // Script to send a Get request to '/sessions'
    $(document).ready(function(){
        $('#getButton').click(function(){
            $.ajax({
              url: '/session',
              type: 'GET',
              success: function(data,status){
                  alert("Server response data: " + JSON.stringify(data) + "\nStatus: " + status);
              }
            });
        });
    });
     // Script to POST URL encoded data from a HTML form
     $(document).ready(function(){
         // click on button submit
         $("#submitPost").on('click', function(){
             // send ajax
             $.ajax({
                 url: '/session', // url where to submit the request
                 type : "POST", // type of action POST || GET
                 contentType: "application/x-www-form-urlencoded", // set the request Content-Type header
                 dataType : 'json', // data type
                 data : $("#post_form").serialize(), // post data || get data
                 success: function(data, status){
                     alert("Server response data: " + JSON.stringify(data) + "\nStatus: " + status);
                 },
                 error: function() {
                     alert("Failed to post JSON");
                 }
             })
         });
     });
     // Script to send a DELETE request to '/sessions'
    $(document).ready(function(){
        $('#deleteButton').click(function(){
            $.ajax({
              url: '/session',
              type: 'DELETE',
              success: function(data,status){
                  alert("Server successfully deleted \nStatus: " + status);
              }
            });
        });
    });
    // Script to send a Get request to '/sessions'
    $(document).ready(function(){
        $('#getButtonRaw').click(function(){
            $.ajax({
              url: '/rawsession',
              type: 'GET',
              success: function(data,status){
                  alert("Server response data: " + JSON.stringify(data) + "\nStatus: " + status);
              }
            });
        });
    });
     // Script to POST URL encoded data from a HTML form
     $(document).ready(function(){
         // click on button submit
         $("#submitPostRaw").on('click', function(){
             // send ajax
             $.ajax({
                 url: '/rawsession', // url where to submit the request
                 type : "POST", // type of action POST || GET
                 contentType: "application/x-www-form-urlencoded", // set the request Content-Type header
                 dataType : 'json', // data type
                 data : $("#post_form_raw").serialize(), // post data || get data
                 success: function(data, status){
                     alert("Server response data: " + JSON.stringify(data) + "\nStatus: " + status);
                 },
                 error: function() {
                     alert("Failed to post JSON");
                 }
             })
         });
     });
     // Script to send a DELETE request to '/sessions'
    $(document).ready(function(){
        $('#deleteButtonRaw').click(function(){
            $.ajax({
              url: '/rawsession',
              type: 'DELETE',
              success: function(data,status){
                  alert("Server successfully deleted \nStatus: " + status);
              }
            });
        });
    });
</script>
   <title>Persisting with sessions</title>
 </head>
 <body>
   <h2>Persisting with sessions</h2>
     <p>
     This page will send HTTP requests to the "/session" and "/rawsession" routes of the Kitura sample server.<br>
     A session is created for each user and is persisted through cookies. You can test this using a private window.<br>
     The server will process the incoming request to return or change an array "Books" that is stored within the user's session.<br><br>
     <a href="https://github.com/Kitura-Next/Kitura-Sample/blob/master/Sources/Application/Routes/SessionsRoutes.swift" target="_blank" class="inLink">View the code</a>
     </p>
     <br>
     <h2>Codable Session</h2>
    <ul><li>
         <p>Send an HTTP GET request to &quot;/session&quot; to see the books in your session</p>
         <input type="button" value="GET to &quot;/session&quot;" id="getButton" >
     </li></ul>
     <ul><li>
         <p>Send a URL encoded HTTP POST request to &quot;/session&quot; to add a book to your session</p>
         <form action="" method="post" id="post_form">
           <div class="block">
             <label>Name:</label> <input type="text" name="name" required="required"><br>
             <label>Author:</label>  <input type="text" name="author" required="required"><br>
             <label>Rating:</label>  <input type="number" name="rating" required="required" min="1" max="5"><br><br>
             <input id="submitPost" type="button" name="Submit" value="Submit">
           </div>
         </form>
     </li></ul>
     <ul><li>
         <p>Send an HTTP DELETE request to &quot;/session&quot; logout and clear your session data</p>
         <input type="button" value="DELETE to &quot;/session&quot;" id="deleteButton">
     </li></ul>
     <h2>Raw Session</h2>
     <ul><li>
         <p>Send an HTTP GET request to &quot;/rawsession&quot; to see the books in your Raw session</p>
         <input type="button" value="GET to &quot;/rawsession&quot;" id="getButtonRaw" >
     </li></ul>
     <ul><li>
         <p>Send a URL encoded HTTP POST request to &quot;/rawsession&quot; to add a book to your Raw session</p>
         <form action="" method="post" id="post_form_raw">
           <div class="block">
             <label>Name:</label> <input type="text" name="name" required="required"><br>
             <label>Author:</label> <input type="text" name="author" required="required"><br>
           <label>Rating:</label> <input type="number" name="rating" required="required" min="1" max="5"><br><br>
             <input id="submitPostRaw" type="button" name="Submit" value="Submit">
           </div>
         </form>
     </li></ul>
     <ul><li>
         <p>Send an HTTP GET request to &quot;/rawlogout&quot; to clear your Raw session data</p>
         <input type="button" value="DELETE to &quot;/rawsession&quot;" id="deleteButtonRaw">
     </li></ul>
 </body>
</html>
